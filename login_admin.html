<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>ESG Syariah UMKM</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f8f9fa;
    }
    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 220px;
      height: 100%;
      background: #183a37;
      color: white;
      padding-top: 30px;
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 40px;
      color: #5ec576;
    }
    .sidebar a {
      display: block;
      padding: 12px 20px;
      color: white;
      text-decoration: none;
      font-size: 16px;
      border-radius: 5px;
    }
    .sidebar a:hover,
    .sidebar a.active {
      background: #14524f;
    }
    .sidebar .sidebar-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: white;
      margin-bottom: 20px;
      padding: 0 10px;
    }
    .sidebar .brand-logo img {
      width: 50px;
      height: auto;
    }
    .sidebar .brand-text {
      font-size: 18px;
      font-weight: bold;
      line-height: 1.2;
    }

    /* Main Content */
    .main-content {
      margin-left: 240px;
      padding: 20px;
    }

    /* Card Sambutan */
    .content .card {
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .content .card-header {
      font-weight: bold;
      font-size: 28px;
      margin-bottom: 10px;
      text-align: center;
    }
    .content .card-body {
      font-size: 16px;
      color: #333;
      text-align: center;
    }

    .cards {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    .cards .card {
      flex: 1;
      background: #5ec576;
      color: white;
      text-align: center;
      padding: 12px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 14px;
    }
    .cards .card h3 {
      font-size: 20px;
      margin-top: 8px;
    }

    /* Table & Grafik */
    .table-container {
      margin-top: 20px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }
    th {
      background: #f1f1f1;
    }
    .export-btn {
      float: right;
      background: #28a745;
      color: white;
      padding: 6px 12px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }

    /* Report Area */
    #reportArea {
      background: #fff;
      padding: 30px;
      margin: 20px auto;
      border-radius: 8px;
      border: 2px solid #333;
      max-width: 700px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      page-break-inside: auto;
    }
    #reportArea h2 { text-align: center; margin-bottom: 20px; }
    #reportArea .info { margin-bottom: 15px; }
    .gauge { text-align: center; margin: 20px 0; }
    .gauge-value { font-size: 48px; font-weight: bold; color: #2e7d32; }
    .legend { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
    .legend div { display: flex; align-items: center; gap: 6px; font-size: 14px; }
    .circle { width: 14px; height: 14px; border-radius: 50%; display: inline-block; }
    .baik { background: green; }
    .cukup { background: blue; }
    .kurang { background: red; }
    .cards-report { display: flex; justify-content: space-around; flex-wrap: wrap; margin-top: 20px; }
    .cards-report .card {
      width: 160px;
      padding: 15px;
      border-radius: 10px;
      color: white;
      text-align: center;
      margin: 10px;
    }
    .env { background: #2ecc71; }
    .sosial { background: #3498db; }
    .gov { background: #d4ac0d; color:#000; }
    .keuangan { background: #e84393; }
    .footer { margin-top: 25px; font-weight: bold; }
    .btn {
      display: inline-block;
      background: green;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }

    /* Sembunyikan konten default */
    .hidden { display: none; }
  </style>
</head>
<body>
    
<!-- Sidebar -->
<div class="sidebar">
  <a class="sidebar-brand d-flex align-items-center" href="#">
    <div class="brand-logo">
      <img src="img/logo_uhamka.png" alt="UHAMKA">
    </div>
    <h2 class="brand-text">ESG SYARIAH<br>UMKM</h2>
  </a>

  <a href="#" class="active" onclick="showPage('dashboard', event)">üè† Dashboard</a>
  <a href="#" onclick="showPage('dataumkm', event)">üè™ Data UMKM</a>
  <a href="#" onclick="showPage('reports', event)">üìë Reports</a>
  <a class="collapse-item" href="login.html">‚öôÔ∏è Login</a>
</div>

<!-- Main Content -->
<div class="main-content">
    
  <!-- Dashboard -->
  <div id="dashboard">
    <div class="content">
      <div class="card mb-4">
        <div class="card-header">Selamat Datang Admin</div>
        <div class="card-body">
          <p>Anda berhasil login sebagai <b>Administrator</b>.</p>
          <p>Silakan pilih menu di sidebar untuk mulai mengelola sistem.</p>
        </div>
      </div>
    </div>

    <!-- Cards Ringkasan -->
    <div class="cards">
      <div class="card">Total UMKM <h3>100</h3></div>
      <div class="card">Rata Rata Skor ESG <h3>72</h3></div>
      <div class="card">Status <h3>90</h3></div>
      <div class="card">Status Cukup <h3>40</h3></div>
    </div>

    <!-- Grafik -->
    <div class="table-container">
      <h3>Tren Penilaian ESG 
        <button class="export-btn">Export</button>
      </h3>
      <canvas id="esgChart" height="100"></canvas>
    </div>
  </div>

  <!-- Data UMKM -->
  <div id="dataumkm" class="hidden">
    <div class="table-container">
      <h3>Data UMKM</h3>
      <table>
        <thead>
          <tr>
            <th>No</th>
            <th>Nama UMKM</th>
            <th>Sektor</th>
            <th>Lokasi</th>
            <th>Tanggal</th>
            <th>Env</th>
            <th>Sosial</th>
            <th>Gov</th>
            <th>Keu Syariah</th>
            <th>Maqasid Syariah</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>UMKM Sari Rasa</td>
            <td>Kuliner</td>
            <td>Jakarta</td>
            <td>01-09-2025</td>
            <td>75</td>
            <td>80</td>
            <td>78</td>
            <td>80</td>
            <td>Baik</td>
            <td>Baik</td>
          </tr>
          <tr>
            <td>2</td>
            <td>UMKM Batik Lestari</td>
            <td>Fashion</td>
            <td>Pekalongan</td>
            <td>02-09-2025</td>
            <td>65</td>
            <td>70</td>
            <td>70</td>
            <td>75</td>
            <td>Baik</td>
            <td>Cukup</td>
          </tr>
          <tr>
            <td>3</td>
            <td>UMKM Sehat Jaya</td>
            <td>Herbal</td>
            <td>Bandung</td>
            <td>03-09-2025</td>
            <td>55</td>
            <td>62</td>
            <td>66</td>
            <td>70</td>
            <td>Baik</td>
            <td>Cukup</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Reports -->
  <div id="reports" class="hidden">
    <div class="table-container">
      <h3>Reports</h3>

      <!-- Dropdown pilih UMKM -->
      <label for="umkmSelect"><b>Pilih UMKM:</b></label>
      <select id="umkmSelect" onchange="updateReport()">
        <option value="sari">UMKM Sari Rasa</option>
        <option value="batik">UMKM Batik Lestari</option>
        <option value="sehat">UMKM Sehat Jaya</option>
      </select>

      <div id="reportArea">
        <h2>Hasil Penilaian ESG Syariah UMKM</h2>
        <div class="info" id="reportInfo"></div>
        <div class="gauge"><div class="gauge-value" id="reportScore">0</div></div>
        <div class="legend">
          <div><span class="circle baik"></span> Baik</div>
          <div><span class="circle cukup"></span> Cukup Baik</div>
          <div><span class="circle kurang"></span> Kurang Baik</div>
        </div>
        <div class="cards-report">
          <div class="card env" id="envCard"></div>
          <div class="card sosial" id="sosialCard"></div>
          <div class="card gov" id="govCard"></div>
          <div class="card keuangan" id="keuCard"></div>
        </div>
        <div class="footer" id="reportFooter"></div>
      </div>

      <!-- Tombol Download -->
      <div style="text-align:center;">
        <button id="downloadPdf" class="btn">Download PDF</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Chart di Dashboard
  const ctx = document.getElementById('esgChart').getContext('2d');
  const esgChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov'],
      datasets: [{
        label: 'Skor ESG',
        data: [20,30,45,70,80,75,85,78,90,88,76],
        borderColor: '#28a745',
        backgroundColor: 'rgba(40,167,69,0.2)',
        fill: true,
        tension: 0.4
      }]
    },
    options: { responsive: true, plugins: { legend: { display: false } } }
  });

  // Data UMKM untuk report
  const umkmData = {
    sari: { nama: "UMKM Sari Rasa", tanggal: "21-09-2025", skor: 80, env: 75, sosial: 80, gov: 78, keu: 80, maqasid: "Baik" },
    batik: { nama: "UMKM Batik Lestari", tanggal: "21-09-2025", skor: 70, env: 65, sosial: 70, gov: 70, keu: 75, maqasid: "Cukup" },
    sehat: { nama: "UMKM Sehat Jaya", tanggal: "21-09-2025", skor: 65, env: 55, sosial: 62, gov: 66, keu: 70, maqasid: "Cukup" }
  };

  function updateReport() {
    const selected = document.getElementById("umkmSelect").value;
    const data = umkmData[selected];

    document.getElementById("reportInfo").innerHTML = `
      <p>Nama: <b>${data.nama}</b></p>
      <p>Tanggal: ${data.tanggal}</p>
      <p>Ringkasan Skor ESG</p>
      <p><b>Skor Total ESG</b></p>
    `;
    document.getElementById("reportScore").innerText = data.skor;

    document.getElementById("envCard").innerHTML = `<h4>Environmental</h4><p>${data.env}/100</p>`;
    document.getElementById("sosialCard").innerHTML = `<h4>Sosial</h4><p>${data.sosial}/100</p>`;
    document.getElementById("govCard").innerHTML = `<h4>Governance</h4><p>${data.gov}/100</p>`;
    document.getElementById("keuCard").innerHTML = `<h4>Keuangan Syariah</h4><p>${data.keu}/100</p>`;

    document.getElementById("reportFooter").innerHTML = `Integrasi Maqasid Syariah: <span style="color:green;">${data.maqasid}</span>`;
  }
  updateReport();

  // Ganti halaman
  function showPage(pageId, event) {
    document.querySelectorAll('.main-content > div').forEach(div => div.classList.add('hidden'));
    document.getElementById(pageId).classList.remove('hidden');
    document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    event.target.classList.add('active');
  }

  // Export PDF (versi bagus)
  document.getElementById("downloadPdf").addEventListener("click", function(){
    var element = document.getElementById("reportArea");
    var opt = {
      margin:       [0.3, 0.3, 0.3, 0.3],
      filename:     'report_umkm.pdf',
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 3, useCORS: true, scrollY: 0 },
      jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };
    html2pdf().set(opt).from(element).save();
  });
</script>
</body>
</html>
